(this.webpackJsonpmediapark=this.webpackJsonpmediapark||[]).push([[0],{14:function(e,t,n){e.exports={login:"login_login__PxVTy",loginBtns:"login_loginBtns__29qCG",loginEmail:"login_loginEmail__2kUA9",loginPassword:"login_loginPassword__2nh8v",loginHeader:"login_loginHeader__3nIq2"}},17:function(e,t,n){e.exports={button:"button_button__2kISy",text:"button_text__1NwZZ",active:"button_active__3trUt",logout:"button_logout__2Qca7"}},18:function(e,t,n){e.exports={label:"checkbox_label__34IJb",checkbox:"checkbox_checkbox__1bdqy","click-wave":"checkbox_click-wave__iMDEP",done:"checkbox_done__3CuzK",important:"checkbox_important__2UuKm"}},24:function(e,t,n){e.exports={buttons:"filter_buttons__X7rLG addItemForm_addItemForm__3Fq-e",filterBtns:"filter_filterBtns__2mvlY"}},25:function(e,t,n){e.exports={wrapper:"todos_wrapper__Up_T8",todosHeader:"todos_todosHeader__Zafb1",todos:"todos_todos__3oEaL"}},28:function(e,t,n){e.exports={addItemForm:"addItemForm_addItemForm__3Fq-e",addInput:"addItemForm_addInput__3MBPo"}},29:function(e,t,n){e.exports={searchForm:"searchForm_searchForm__3JFPl addItemForm_addItemForm__3Fq-e",searchInput:"searchForm_searchInput__2R9wS addItemForm_addInput__3MBPo"}},30:function(e,t,n){e.exports={item:"item_item__11Q1_",buttons:"item_buttons__1IbBT"}},42:function(e,t,n){e.exports={app:"app_app__1e3hH"}},45:function(e,t,n){e.exports={loader:"spinner_loader__3sHMm",rotate:"spinner_rotate__224iU",ball1:"spinner_ball1__2WlnR",ball2:"spinner_ball2__4oBp_"}},53:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(20),c=n.n(o),s=(n(53),n(4)),i=n(42),u=n.n(i),l=n(2),d=n(5),b=n(47),j=n(14),p=n.n(j),m=n(7),f=n.n(m),h=n(11),O=n(16),_=n.n(O),x=function(e){var t=Object(l.a)(Object(l.a)({},e),{},{returnSecureToken:!0});return _.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyDrVAch5O5F0nlHLgH_ex0ny_2GwbrN-Zs",t).then((function(e){return e}))},g=function(e){var t=Object(l.a)(Object(l.a)({},e),{},{returnSecureToken:!0});return _.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDrVAch5O5F0nlHLgH_ex0ny_2GwbrN-Zs ",t).then((function(e){return e}))},v=function(e,t){if(void 0!==e.response){var n=e.response.data.error.message;t(F(n)),setTimeout((function(){t(F(""))}),2e3)}},k="SET_LOADING",y="SET_MESSAGE",I="SET_TOKEN",w="ON_SESSION_EXPIRED",S=function(e){return{type:k,loading:e}},F=function(e){return{type:y,message:e}},N=function(e){return{type:I,token:e}};function T(e){return function(t){setTimeout((function(){t(D())}),1e3*e)}}function D(){return localStorage.removeItem("token"),localStorage.removeItem("localId"),localStorage.removeItem("expiresIn"),{type:w}}var E=function(e,t){return function(){var n=Object(h.a)(f.a.mark((function n(r){var a,o,c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r(S(!0)),n.prev=1,0!==t){n.next=8;break}return n.next=5,x(e);case 5:n.t0=n.sent,n.next=11;break;case 8:return n.next=10,g(e);case 10:n.t0=n.sent;case 11:a=n.t0,0===t&&r(F("Welcome on board!")),o=a.data,c=new Date((new Date).getTime()+1e3*o.expiresIn).toString(),localStorage.setItem("token",o.idToken),localStorage.setItem("localId",o.localId),localStorage.setItem("expiresIn",c),r(N(o.idToken)),r(T(o.expiresIn)),0===t&&setTimeout((function(){r(F(""))}),2e3),n.next=26;break;case 23:n.prev=23,n.t1=n.catch(1),v(n.t1,r);case 26:r(S(!1));case 27:case"end":return n.stop()}}),n,null,[[1,23]])})));return function(e){return n.apply(this,arguments)}}()};var C=n(17),B=n.n(C),L=n(1),P=function(e){var t=e.children,n=e.onClick,r=e.type,a=e.status,o=[B.a.button];return r&&o.push(B.a.text),a&&o.push(B.a.active),"logout"===r&&o.push(B.a.logout),Object(L.jsx)("button",{className:o.join(" "),onClick:n,children:t})},H=(n(80),function(e){var t=e.text;return Object(L.jsx)("span",{className:"message",children:t})}),A=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(s.b)(),c=Object(s.c)((function(e){return e.auth.message})),i=Object(b.a)({initialValues:{email:"",password:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password.length<5&&(t.password="Too Short password"),t},onSubmit:function(e){"login"===n&&o(E(e,1)),"register"===n&&o(E(e,0)),i.resetForm()}}),u=function(e){a(e)};return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("h2",{className:p.a.loginHeader,children:"Login or register"}),Object(L.jsxs)("form",{className:p.a.login,onSubmit:i.handleSubmit,children:[i.errors.email&&i.touched.email?Object(L.jsx)("div",{style:{color:"red"},children:i.errors.email}):null,Object(L.jsx)("input",Object(l.a)(Object(l.a)({type:"email",className:p.a.loginEmail,placeholder:"type your email"},i.getFieldProps("email")),{},{onBlur:i.handleBlur})),i.errors.password&&i.touched.password?Object(L.jsx)("div",{style:{color:"red"},children:i.errors.password}):null,Object(L.jsx)("input",Object(l.a)(Object(l.a)({type:"password",className:p.a.loginPassword,placeholder:"type your password"},i.getFieldProps("password")),{},{onBlur:i.handleBlur})),Object(L.jsxs)("div",{className:p.a.loginBtns,children:[Object(L.jsx)(P,{type:"login",onClick:function(){return u("login")},children:"login"}),Object(L.jsx)(P,{type:"register",onClick:function(){return u("register")},children:"register"})]})]}),c&&Object(L.jsx)(H,{text:c})]})},G=_.a.create({baseURL:"https://todotest-3747d-default-rtdb.firebaseio.com"}),Z=function(e){return G.post("/todos.json",e).then((function(e){return e.data}))},q=function(e){return G.delete("/todos/".concat(e,".json")).then((function(e){return e.data}))},M=function(e,t){return G.put("/todos/".concat(e,".json"),t).then((function(e){return e.data}))},U="GET_ITEMS",V="SET_TODO_LOADING",R=function(e){return{type:V,loading:e}},J=function(){return function(){var e=Object(h.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(R(!0)),e.prev=1,e.next=4,G.get("/todos.json").then((function(e){return e.data}));case 4:n=e.sent,r=[],null!==n&&(r=Object.entries(n).map((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(l.a)(Object(l.a)({},r),{},{id:n})}))),t({type:U,items:r}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),v(e.t0,t);case 13:t(R(!1));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},K=function(e,t){return function(){var n=Object(h.a)(f.a.mark((function n(r,a){var o,c,s;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=a().todos.todos,!(c=o.find((function(t){return t.id===e})))){n.next=15;break}return s=Object(l.a)({},c),0===t&&(s.isImportant=!s.isImportant),1===t&&(s.isDone=!s.isDone),n.prev=6,n.next=9,M(e,s);case 9:r(J()),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(6),v(n.t0,r);case 15:case"end":return n.stop()}}),n,null,[[6,12]])})));return function(e,t){return n.apply(this,arguments)}}()},z=n(10),W=n(28),Q=n.n(W),X=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(!1),c=Object(d.a)(o,2),i=c[0],u=c[1],l=Object(s.b)(),b=function(){if(!i){if(""===n.trim())return void a("");l(function(e){return function(){var t=Object(h.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Z(e);case 3:n(J()),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),v(t.t0,n);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}({label:n,isDone:!1,isImportant:!1})),a("")}};return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("div",{className:Q.a.addItemForm,children:[Object(L.jsx)("input",{type:"text",placeholder:"type here to add todo",className:Q.a.addInput,value:n,onChange:function(e){var t=e.currentTarget.value;t.length>50?u(!0):u(!1),a(t)},onKeyDown:function(e){"Enter"===e.key&&b(),"Escape"===e.key&&a("")}}),Object(L.jsx)(P,{onClick:b,children:Object(L.jsx)(z.a,{style:{color:"blue"}})})]}),i&&Object(L.jsx)("span",{style:{color:"red"},children:"Too long. Task name must be less then 50 characters length. "})]})},Y=n(24),$=n.n(Y),ee=function(e){var t=e.filterValueChange,n=Object(r.useState)("all"),a=Object(d.a)(n,2),o=a[0],c=a[1],s=[{name:"all"},{name:"done"},{name:"todo"},{name:"important"}].map((function(e){var n=e.name===o;return Object(L.jsx)(P,{onClick:function(){return n=e.name,t(n),void c(n);var n},type:"text",status:n,children:e.name},e.name)}));return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("div",{className:$.a.filterForm}),Object(L.jsxs)("div",{className:$.a.buttons,children:[Object(L.jsx)("h4",{children:"Filter tasks by: "}),Object(L.jsx)("div",{className:$.a.filterBtns,children:s})]})]})},te=n(29),ne=n.n(te),re=function(e){var t=e.onSearch,n=Object(r.useState)(""),a=Object(d.a)(n,2),o=a[0],c=a[1];return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)("div",{className:ne.a.searchForm,children:[Object(L.jsx)("input",{type:"text",placeholder:"type here to find the task",className:ne.a.searchInput,value:o,onChange:function(e){t(e.currentTarget.value),c(e.currentTarget.value)}}),Object(L.jsx)(z.b,{style:{color:"grey"}})]})})},ae=n(45),oe=n.n(ae),ce=function(){return Object(L.jsx)("div",{className:oe.a.loader})},se=n(30),ie=n.n(se),ue=n(18),le=n.n(ue),de=function(e){var t=e.label,n=e.checked,r=e.id,a=e.important,o=Object(s.b)(),c=[le.a.label];return n&&c.push(le.a.done),a&&c.push(le.a.important),Object(L.jsxs)("label",{className:c.join(" "),children:[Object(L.jsx)("input",{type:"checkbox",checked:n,className:le.a.checkbox,onChange:function(){o(K(r,1))}}),t]})},be=function(e){var t=e.label,n=e.isDone,r=e.important,a=e.id,o=Object(s.b)();return Object(L.jsxs)("li",{className:ie.a.item,children:[Object(L.jsx)(de,{label:t,id:a,checked:n,important:r}),Object(L.jsxs)("div",{className:ie.a.buttons,children:[Object(L.jsx)(P,{onClick:function(){o(K(a,0))},children:Object(L.jsx)(z.c,{style:{color:"green"}})}),Object(L.jsx)(P,{onClick:function(){o(function(e){return function(){var t=Object(h.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q(e);case 3:n(J()),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),v(t.t0,n);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}(a))},children:Object(L.jsx)(z.d,{style:{color:"red"}})})]})]})},je=n(25),pe=n.n(je),me=function(){var e=Object(r.useState)("all"),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(""),c=Object(d.a)(o,2),i=c[0],u=c[1],l=Object(s.c)((function(e){return e.todos.todos})),b=Object(s.c)((function(e){return e.todos.loading})),j=Object(s.c)((function(e){return e.todos.error})),p=Object(s.b)();Object(r.useEffect)((function(){p(J())}),[]);var m,f,h=function(e,t){switch(e){case"all":return t;case"done":return t.filter((function(e){return e.isDone}));case"todo":return t.filter((function(e){return!e.isDone}));case"important":return t.filter((function(e){return e.isImportant}));default:return t}}(n,l),O=(m=i,f=h,m?f.filter((function(e){return e.label.toLowerCase().indexOf(m.toLowerCase())>-1})):f).map((function(e){var t=e.id,n=e.label,r=e.isDone,a=e.isImportant;return Object(L.jsx)(be,{label:n,isDone:r,important:a,id:t},t)}));return Object(L.jsxs)("div",{className:pe.a.wrapper,children:[Object(L.jsx)("h1",{className:pe.a.todosHeader,children:"Daily tasks"}),j?Object(L.jsx)(H,{text:j}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(re,{onSearch:function(e){u(e)}}),Object(L.jsx)(ee,{filterValueChange:function(e){a(e)}}),Object(L.jsx)("ul",{className:pe.a.todos,children:b?Object(L.jsx)(ce,{}):O}),Object(L.jsx)(X,{})]}),Object(L.jsx)(P,{onClick:function(){p(D()),p(J())},type:"logout",children:"Logout"})]})};var fe=function(){var e=Object(s.c)((function(e){return e.auth.isLoading})),t=Object(s.c)((function(e){return e.auth.token})),n=Object(s.b)();Object(r.useEffect)((function(){n((function(e){var t=localStorage.getItem("token");if(t){var n=new Date(localStorage.getItem("expiresIn"));n<=new Date?e(D()):(e(N(t)),e(T((n.getTime()-(new Date).getTime())/1e3)))}else e(D())}))}),[]);var a=t?Object(L.jsx)(me,{}):Object(L.jsx)(A,{});return Object(L.jsx)("div",{className:u.a.app,children:e?Object(L.jsx)(ce,{}):a})},he=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,82)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))},Oe=n(13),_e=n(46),xe={isLoading:!1,message:"",token:""},ge=n(48),ve={loading:!1,error:"",todos:[]},ke=Object(Oe.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(l.a)(Object(l.a)({},e),{},{isLoading:t.loading});case y:return Object(l.a)(Object(l.a)({},e),{},{message:t.message});case I:return Object(l.a)(Object(l.a)({},e),{},{token:t.token});case w:return Object(l.a)(Object(l.a)({},e),{},{token:""});default:return e}},todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(l.a)(Object(l.a)({},e),{},{todos:Object(ge.a)(t.items)});case V:return Object(l.a)(Object(l.a)({},e),{},{loading:t.loading});case y:return Object(l.a)(Object(l.a)({},e),{},{error:t.message});default:return e}}}),ye=Object(Oe.d)(ke,Object(Oe.a)(_e.a));c.a.render(Object(L.jsx)(a.a.StrictMode,{children:Object(L.jsx)(s.a,{store:ye,children:Object(L.jsx)(fe,{})})}),document.getElementById("root")),he()}},[[81,1,2]]]);
//# sourceMappingURL=main.df712e16.chunk.js.map